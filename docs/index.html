<!DOCTYPE html>
<!--
Template Name: Hoppler
Author: <a href="https://www.os-templates.com/">OS Templates</a>
Author URI: https://www.os-templates.com/
Licence: Free to use under our free template licence terms
Licence URI: https://www.os-templates.com/template-terms
-->
<html lang="">
<!-- To declare your language - read more here: https://www.w3.org/International/questions/qa-html-language-declarations -->

<head>
  <title>Whisper Engine</title>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <link href="layout/styles/layout.css" rel="stylesheet" type="text/css" media="all">
</head>

<body id="top">
  <!-- ################################################################################################ -->
  <!-- ################################################################################################ -->
  <!-- ################################################################################################ -->
  <!-- Top Background Image Wrapper -->
  <div class="bgded overlay" style="background-image:url('images/demo/backgrounds/01.png');">
    <!-- ################################################################################################ -->
    <div class="wrapper row1">
      <header id="header" class="hoc clear">
        <!-- ################################################################################################ -->
        <div id="logo" class="fl_left">
          <h1><a href="https://www.citm.upc.edu/">CITM - UPC</a></h1>
        </div>
        <!-- ################################################################################################ -->
      </header>
    </div>
    <!-- ################################################################################################ -->
    <!-- ################################################################################################ -->
    <!-- ################################################################################################ -->
    <div id="pageintro" class="hoc clear">
      <article>
        <!-- ################################################################################################ -->
        <h3 class="heading">Whisp Engine</h3>
        <p></p>
        <p class="font-x1 uppercase bold">Empty Whisper</p>
        <footer><a class="btn" href="https://github.com/Empty-Whisper/WhispEngine/releases/latest">Download Latest
            Release</a></footer>
        <footer><a class="btn" href="https://github.com/Empty-Whisper/WhispEngine/tree/master">GitHub Repository</a>
        </footer>

        <!-- ################################################################################################ -->
      </article>
    </div>

    <!-- ################################################################################################ -->
  </div>
  <!-- End Top Background Image Wrapper -->
  <div class="wrapper row1">
    <div class="hoc container clear">
      <!-- ################################################################################################ -->
      <div class="sectiontitle">
        <h6 class="heading">Description</h6>
      </div>
      <div class="group">
        <p><strong>Smile and wave boys</strong></p>
        <p>Whisper Engine is a 3D video game engine. It has been developed in the subject of Game Engines in the third
          year of the university degree of videogames of CITM-UPC. The subject was to make an engine from scratch using
          OpenGL, and here is the result.</p>
        <p class="btmspace-30">We hope you like it!</p>
      </div>
      <!-- ################################################################################################ -->
    </div>
  </div>
  <!-- ################################################################################################ -->
  <!-- ################################################################################################ -->
  <!-- ################################################################################################ -->
  <div class="wrapper row2">
    <main class="hoc container clear">
      <div class="sectiontitle">
        <h6 class="heading">Main Core Sub-systems</h6>
      </div>
      <div class="group">
        <p><strong>GameObjects</strong></p>
        <p>The GameObjects are the core of the engine and the future game.
          It is a container, an instance that stores different components. A GameObject by itself has nothing special,
          components, a name, a unique identifier, a reference to the father and a vector with references to the
          children, which provides
          the possibility of creating GameObjects hierarchies.</p>
        <p><strong>Components</strong></p>
        <p>The components are what give the GameObjects useful. Each component has a use and features
          that are displayed and can be edited in the GameObjects inspector. In WhispEngine we have a
          few.</p>
        <p class="btmspace-10">The Transform component will always exist alongside the GameObject.
          It contains two transformation matrices, a global one with the position, rotation and scale with
          respect to the world and a local one with respect to the father's global matrix.
        </p>
        <p class="btmspace-10">Mesh component contains the mesh to be rendered and is
          responsible for painting each frame, it also has the
          bounding boxes, the AABB and the OBB.
        </p>
        <p class="btmspace-10">Material component is responsible for painting a texture
          in the mesh or, if it does not have any, of a specific color.
        </p>
        <p class="btmspace-10">Camera component is used to paint
          the scene in the game, it has several values ​​to modify such as the FOV, the aspect ratio or the
          distance of the near and far plane.
        </p>
        <p class="btmspace-10">Component script is the one that is responsible for executing
          a lua script, saving its variables and displaying the public ones in the inspector so that they
          can be modified.</p>

        <p><strong>Prefabs</strong></p>
        <p>Prefabs are hierarchies of GameObjects with components that are saved to
          instantiate several or have some in the scene, change a value of a variable and the
          change is reflected in the other objects.</p>

        <p><strong>Hierarchy</strong></p>
        <p>A hierarchy is simply GameObjects' relationship with his father and his children.
          Each scene has an invisible parent object that is the root
          and that GameObject is the one that has as children the objects we see in the scene.</p>

        <p><strong>Scenes</strong></p>
        <p>The scene saves the hierarchy, next to the position and rotation of the viewport camera under a name.</p>

        <p><strong>Octree</strong></p>
        <p>Octree are a way to optimize, and Whisp Engine is not far behind when
          it comes to optimization. When a GameObject is set as static it is added to
          the octree, dividing it into 8 if it is positioned in an empty quadrant. The octree are
          a much faster way to check collisions, in our case with the mouse picking raycast or with the frustum.</p>
        <p><strong>ZBuffer</strong></p>
        <p>Odio in accumsan in finibus lacus vitae condimentum dignissim urna est auctor ante eget viverra ex ex
          non
          enim fusce vitae leo eleifend rutrum nisl sit amet congue ligula ut vulputate hendrerit nisl ut
          condimentum
          duis.</p>
        <p><strong>Skybox</strong></p>
        <p>Odio in accumsan in finibus lacus vitae condimentum dignissim urna est auctor ante eget viverra ex ex
          non
          enim fusce vitae leo eleifend rutrum nisl sit amet congue ligula ut vulputate hendrerit nisl ut
          condimentum
          duis.</p>
        <p><strong>ShortCuts</strong></p>
        <p>ShortCuts system allows to put a concatenation of three keys and a pointer to a function. Every
          time you push the keys, the function will be called. We used them as call of panels active/deactive. It
          also has a panel to edit that shortcuts in order to set your own keys.
        </p>
        <p><strong>Play, Pause and One Frame</strong></p>
        <p>We want to separate the time creating the game and the time the game is playing. We have trhee buttons in
          order to
          do this task.</p>

        <p class="btmspace-10">Play will start the game. Starting the game timer, compiling the scripts and creating a
          temporary save file of current scene.
          Pressing Play during game run, will stop the game, loading the scene that was before start.</p>

        <p class="btmspace-10">Pause will pause all GameObjects, avoiding update scripts.</p>

        <p class="btmspace-10">One Frame will reanude the game for one frame.
        </p>
        <p><strong>Library</strong></p>
        <p>Load Fbx from file is so slow,
          in order to speed up we create a file that contain the data we need
          from assets in our own file format because loading from own file format
          is a lot faster. On the other hand, if we have a mesh of a house and we
          instantiate it more than one time, the mesh will be loaded in memory more than one,
          but we don't want this, so, having a resource of that mess and the component mesh stores that resource
          will share the resource with other component meshes but only have loaded in memory one mesh</p>
      </div>

      <!-- ################################################################################################ -->
      <!-- / main body -->
      <div class="clear"></div>
    </main>
  </div>
  <!-- ################################################################################################ -->
  <!-- ################################################################################################ -->
  <!-- ################################################################################################ -->

  <div class="wrapper row1">
    <main class="hoc container clear">
      <div class="sectiontitle">
        <h6 class="heading">Scripting - Last Assignment</h6>
      </div>
      <!-- main body -->
      <!-- ################################################################################################ -->
      <h6 class="heading font-x1">Main Structure</h6>
      <p>Here we have the simple flow diagram of scripting structure:</p>
      <a><img src="images/ScriptingFlow.png" alt=""></a>
      <p class="btmspace-30">First we have to talk about the language we chose, Lua. Lua is a powerful, efficient,
        lightweight, embeddable scripting language. It supports procedural programming, object-oriented programming,
        functional programming, data-driven programming, and data description.</p>
      <p class="btmspace-30">Lua is a good option also for the great integration in C. We have also integrate LuaBridge,
        a very good library to relate Lua with and C++ code of engine and vice versa.</p>
      <p class="btmspace-10"><strong>Scripting Flow</strong></p>
      <p class="btmspace-30">First, we count with two main files: ModuleScripting and ComponentScript. We will talk
        about the component script later. ModuleScripting is a Sub Class of Module that will have the Lua State in order
        to use lua scripts in the engine. On the init of Engine will create an instance of Lua State and init all lua
        libraries. After, Application
        wil call a virtual function in Module called <code>LuaRegister()</code> in charge of register all functions and
        fields that we want to use in scripts, for example the Module Input will Register its functions GetKey,
        GetMouseButton...</p>
      <p class="btmspace-30">After the init and start of all modules, starts the Update loop. ModuleScripting does not
        have any instructions to do in the loop, all logic is in component script. The update of GameObjects do the
        update of all its components. The main structure of Component Script is drawed in the diagram above. Once the
        engine is in game mode, will check if is the first time the component do the first update, if not, the engine
        will compile the script and saved a copy of the lua table in a LuaRef (we will talk later when we explain the
        component). After compiling, or not if was already compiled, the script pushes global variables to the lua
        state. This is made because you will want to access to the GameObject attached to component script but lua has
        not know what GameObject is the object you are calling. Lua allows you to set global variables, so we push the
        pointer of GameObject of the component and called it "gameObject", so now in script when we type "gameObject" we
        will refering to the GameObject of the script. We made the same with <code>transform</code> and with public vars
        in inspector.</p>
      <p class="btmspace-30">Once all variables are pushed we see if we have to call <code>Start</code> or
        <code>Update</code>. Is important to call the function from LuaRef because we can have more than one GameObject
        with the same script and if we execute the script as normal the variables will we shared with all GameObject
        that have the same script (in the script sctructure we will see why we do like that).</p>
      <p class="btmspace-30">After execute the script it is the time to pop the global variables we pushed before in
        order that other scripts do not access to other GameObjects and other vars. We pushed from lua stack. Also we
        update the public variables because we send a copy of that variables.</p>
      <p class="btmspace-30">This is the Update of component script. After finish the Update, engine will check if the
        user wants to exit, if he want, will destroy all modules. ModuleScripting will close Lua State. And finally
        close all application.</p>
      <div>
      </div>
      <ul></ul>
      <ul></ul>
      <h6 class="heading font-x1">Script as a Component</h6>
      <p>The component script will be the container that will compile and execute the script and save the public
        variables in order to print them in the inspector. Here we have the class diagram:</p>
      <a><img src="images/ComponentScriptDiagram.png"></a>
      <p class="btmspace-30">The most important in the component is the LuaRef var and the script_path. LuaRef is a
        structure of LuaBridge that keep the reference of any variable in a Lua script. To set some context, here we
        have the Model Script:</p>
      <a><img src="images/model.png"></a>
      <p class="btmspace-30">This is the script Model, when you create a script inside the engine, will copy that and
        change the name class for the name you setted. As we can see, all is in a function that returns a local table.
        Because you cannot get local variables in C++ from Lua we have a complete function that returns a local table.
        With that we save some headaches with the shared scripts with some GameObjects. The main variable here is the
        <code>Model</code>(or the name you setted to the script) that will act like a class in C++. Model is a table
        that has three different variables. <code>Variables</code> is a table that will keep the public variables that
        we want to see in the inspector in order to modify in the engine. We also have <code>Start</code> and
        <code>Update</code> that we have explained before. The user can create new variables inside Model table. Every
        time a component script compile a script, will execute the Init function and save in a LuaRef the table.</p>
      <a><img src="images/PublicVar.png"></a>
      <p class="btmspace-30">In order to have public vars that user can edit we have to consider some things specials in
        lua. Firs of all, lua is dynamically typed so you can have a number and later assign a string, this will be
        difficult to get in the inspector. Lua types are nil, boolean, number (only "float", int does not exist),
        string, userdata, function, thread, and table. WhispEngine can hold in editor the next types: boolean, int,
        float, string, GameObject and Prefab. to store that variables in editor we have to read from the raw script and
        save in a container. The two classes above were made to store that data and print in the inspector.
        <code>PublicVar</code> is the base class and Property class is the class to store data, inheriting from
        PublicVar. We made that way because we want to save in the same vector different type of data. Each script
        component will save a map of string and PublicVar. PublicVar also keeps the variable type and a list of macros
        in order to edit the way variables show in the inspector. WhispEngine for the moment has four macros.
        ISGAMEOBJECT is when you declare a GameObject to know that will be a GameObject. This can sound a little weird,
        but it is necessary in lua because it is not like c# that you have <code>GameObject variable_name;</code> in lua
        is like this: <code>variable_name</code>, and that could be a GameObject, a number, a string... and the same
        with Prefabs. So in order to let the engine understand what will be you have to initialize all variables that
        you want in the inspector. This are an example: </p>
      <p>Script</p>
      <a><img src="images/public_var_example1.png"></a>
      <p>In engine Inspector</p>
      <a><img src="images/public_var_example2.png"></a>
      <p>GameObject vars are treated as GameObject pointers, to assign a GameObject to a public variable in the
        inspector just drag a Gameobject from the hierarchy to the variable in the inspector. The Engine will save all
        variables in the scene with the data you setted. If you want to instantiate a Gameobject from a script the
        better way is to create a prefab of that GameObject and create a public var in the script. To assign a Prefab
        just Drag from Resource panel the prefab you want to the variable prefab. Don't forget to set the macros, in the
        case of GameObjects is: variable_name = nil, --[GameObject]. And for Prefabs is: variable_name = nil,
        --[Prefab].</p>
      <div>
      </div>
      <ul></ul>

      <div class="sectiontitle">
        <h6 class="heading">WhispEngine Lua Wiki</h6>
      </div>
      <div class="group">
        <p><strong>Introduction</strong></p>

        <p>Here you will find the functions and global variables that uses the scripting system in order to create yout
          own scripts.</p>

        <p><strong>Public variables</strong></p>
        <p>All the variables you set in the table of Variables will be public in the inspector. to access later in the
          script you will have to add the prefix "var".</p>
        <p class="btmspace-30">For example if you have speed = 5, later in code you will have to refer to it as
          var.speed to access the value in the inspector.</p>
        <p><strong>GameObject</strong></p>
        <p>GameObject is a class of C++ that you can use in lus scripts. All GameObjects you have in scripts will have
          that fields:</p>
        <p style="color:orange"><strong>active</strong>:</p>
        <p> Changes the active bool of GameObject.
          <code>gameObject.active = false --> deactive the GameObject</code></p>
        <p style="color:orange"><strong>name</strong>:</p>
        <p> Changes the name of GameObject.
          <code>gameObject.name = 'Tina' --> Sets the name of GameObject to 'Tina'</code></pstyle="color:orange">
          </pstyle>>
          <p style="color:orange"><strong>transform</strong>:</p>
          <p> Gets the transform object of the GameObject.</p>
          <p><strong>gameObject</strong></p>
          <p>The word "gameObject" is reserved for the GameObject pointer of the GameObject attached to that script
            component.</p>
          <p><strong>transform</strong></p>
          <p>The word "transform" is reserved for the Transform pointer of the GameObject attached to that script
            component. All GameObjects you have in scripts will have
            that fields:</p>

          <p style="color:orange"><strong>gameObject</strong>:</p>
          <p> Is the GameObject of the own Transform.</p>
          <p style="color:orange"><strong>parent</strong>:</p>
          <p>The parent of the GameObject of the Transform.</p>
          <p style="color:orange"><strong>position</strong>:</p>
          <p>The Local position referenced to parent.</p>
          <p style="color:orange"><strong>gposition</strong>:</p>
          <p> The Global position.</p>
          <p style="color:orange"><strong>rotation</strong>:</p>
          <p>The Local Rotation.</p>
          <p style="color:orange"><strong>grotation</strong>:</p>
          <p>The Global Rotation.</p>
          <p style="color:orange"><strong>forward</strong>:</p>
          <p>Forward vector of the global rotation.</p>
          <p style="color:orange"><strong>up</strong>:</p>
          <p>Upper vector of the global rotation.</p>
          <p style="color:orange"><strong>right</strong>:</p>
          <p>Right vector of the global rotation.</p>
          <p style="color:orange"><strong>scale</strong>:</p>
          <p>Local Scale.</p>
          <p style="color:orange"><strong>SetPositionv</strong>:</p>
          <p>Function to set the position of the GameObject. The argument is a Vector3. <p style="color: lightblue;">
              <code>transform:SetPositionv(Vector3(1, 0, 0)) --> Set the position to position (1, 0, 0)</code></p>
          </p>
          <p style="color:orange"><strong>SetPosition3f</strong>:</p>
          <p>Function to set the position of the GameObject. The argument are 3 numbers. <p style="color: lightblue;">
              <code>transform:SetPosition3f(1, 0, 0) --> Set the position to position (1, 0, 0)</code></p>

            <p><strong>gameObject</strong></p>
            <p>The word "gameObject" is reserved for the GameObject pointer of the GameObject attached to that
              script
              component.</p>
      </div>

      <!-- ################################################################################################ -->
      <!-- / main body -->
      <div class="clear"></div>
    </main>
  </div>
  <!-- ################################################################################################ -->
  <div class="wrapper bgded overlay" style="background-image:url('images/gal1.png');">
    <div class="sectiontitle">
      <h6 class="heading">Video Demo</h6>
      <div class="services">
        <figure class="videocontainer">
          <!-- Important: Any type of video called via "iframe" must be in a container using class="videocontainer" -->
          <iframe width="1280" height="720" src="https://www.youtube.com/embed/Gw7vHAQZ10M" frameborder="0"
            allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
        </figure>
      </div>
    </div>
  </div>
  <!-- ################################################################################################ -->
  <!-- ################################################################################################ -->
  <!-- ################################################################################################ -->
  <div class="wrapper row1">
    <section class="hoc container clear">
      <!-- ################################################################################################ -->
      <div class="sectiontitle">
        <h6 class="heading">Authors Work</h6>
      </div>
      <div class="group team">

        <figure class="one_third"><a class=><img src="images/demo/christian.png" alt=""></a>
          <figcaption>
            <h6 class="heading">Christian Martínez De La Rosa</h6>
            <em>Programmer</em>
            <footer>
              <ul class="faico clear">
                <li><a class="faicon-linkedin"
                    href="https://www.linkedin.com/in/christianmartinezdelarosa/?originalSubdomain=es"><i
                      class="fa fa-linkedin"></i></a></li>
                <li><a class="faicon-github" href="https://github.com/christt105"><i class="fa fa-github"></i></a>
                </li>
                <!--<li><a class="faicon-twitter" href="#"><i class="fa fa-twitter"></i></a></li>-->
              </ul>
            </footer>
          </figcaption>
        </figure>
      </div>
      <div class="group">
        <p><strong>1rs Assigment</strong></p>
        <p>- Core Loop</p>
        <p>- GameObject class</p>
        <p>- Components</p>
        <p>- Transformations</p>
        <p>- GameObject Hierarchy</p>
        <p>- FBX Importer</p>
        <p>- Hierarchy Panel</p>
        <p>- Console Panel</p>
        <p>- ShortCuts System</p>
        <p>- Integration JSON Parser</p>
        <p><strong>2nd Assigment</strong></p>
        <p>- Octree</p>
        <p>- Components properties on inspector</p>
        <p>- Octree</p>
        <p>- Scene Serialization (Load and Save)</p>
        <p>- Part of Bounding Boxes</p>
        <p>- Own Format</p>
        <p>- Resource manager</p>
        <p>- Start/Pause/Stop and recover init state</p>
        <p><strong>3rd Assigment</strong></p>
        <p>- Scripting Structure</p>
        <p>- integrate LuaBridge to structure</p>
        <p>- Script Component</p>
        <p>- Script class</p>
        <p>- Prefabs</p>
        <p>- Game Builds</p>
        <p>- Integrate a Script Editor in Engine</p>
      </div>
      <ul></ul>
      <ul></ul>
      <div class="group team">

        <figure class="one_third"><a class=><img src="images/demo/marc.png" alt=""></a>
          <figcaption>
            <h6 class="heading">Marc Gálvez Llorens</h6>
            <em>Designer</em>
            <footer>
              <ul class="faico clear">
                <li><a class="faicon-linkedin" href="https://www.linkedin.com/in/marc-g%C3%A1lvez-llorens-539938173/"><i
                      class="fa fa-linkedin"></i></a></li>
                <li><a class="faicon-github" href="https://github.com/optus23"><i class="fa fa-github"></i></a>
                </li>
                <!--<li><a class="faicon-twitter" href="#"><i class="fa fa-twitter"></i></a></li>-->
              </ul>
            </footer>
          </figcaption>
        </figure>
      </div>
      <div class="group">
        <p><strong>1rs Assigment</strong></p>
        <p>- Docking</p>
        <p>- Outline selected GameObjects (parent and children)</p>
        <p><strong>2nd Assigment</strong></p>
        <p>- Hierarchy GameObjects</p>
        <p><strong>3rd Assigment</strong></p>
        <p>Odio in accumsan in finibus lacus vitae condimentum dignissim urna est auctor ante eget viverra ex ex non
          enim fusce vitae leo eleifend rutrum nisl sit amet congue ligula ut vulputate hendrerit nisl ut condimentum
          duis.</p>
        <p class="btmspace-30">Luctus quam ut est aliquam et ultricies nisl vulputate donec in luctus arcu maecenas nec
          metus ac magna posuere.</p>

      </div>

  </div>

  <!-- ################################################################################################ -->
  </section>
  </div>
  <!-- ################################################################################################ -->
  <!-- ################################################################################################ -->
  <!-- ################################################################################################ -->
  <div class="wrapper bgded overlay" style="background-image:url('images/demo/backgrounds/04.png');">
    <div class="hoc container testimonials clear">
      <!-- ################################################################################################ -->
      <article><img src="images/demo/100x100.png" alt="">
        <blockquote>Organization made in Terrassa to develop a 3D Game Engine and an AI Game of their corresponding
          subjects.
        </blockquote>

        <h6 class="heading font-x1">License</h6>
        <em>MIT License

          Copyright (c) 2019 Empty-Whisper

          Permission is hereby granted, free of charge, to any person obtaining a copy
          of this software and associated documentation files (the "Software"), to deal
          in the Software without restriction, including without limitation the rights
          to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
          copies of the Software, and to permit persons to whom the Software is
          furnished to do so, subject to the following conditions:

          The above copyright notice and this permission notice shall be included in all
          copies or substantial portions of the Software.

          THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
          IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
          FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
          AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
          LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
          OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
          SOFTWARE.
        </em>
      </article>
      <!-- ################################################################################################ -->
    </div>
  </div>
  <!-- ################################################################################################ -->
  <!-- ################################################################################################ -->
  <!-- ################################################################################################ -->
  <div class="wrapper row5">
    <div id="copyright" class="hoc clear">
      <!-- ################################################################################################ -->
      <p class="fl_left">Copyright &copy; 2018 - All Rights Reserved - <a href="https://github.com/Empty-Whisper">Empty
          Whisper</a></p>
      <p class="fl_right">Template by <a target="_blank" href="https://www.os-templates.com/"
          title="Free Website Templates">OS Templates</a></p>
      <!-- ################################################################################################ -->
    </div>
  </div>
  <!-- ################################################################################################ -->
  <!-- ################################################################################################ -->
  <!-- ################################################################################################ -->
  <a id="backtotop" href="#top"><i class="fa fa-chevron-up"></i></a>
  <!-- JAVASCRIPTS -->
  <script src="layout/scripts/jquery.min.js"></script>
  <script src="layout/scripts/jquery.backtotop.js"></script>
  <script src="layout/scripts/jquery.mobilemenu.js"></script>
</body>

</html>